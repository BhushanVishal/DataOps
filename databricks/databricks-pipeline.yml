# Sample YAML file to validate and export an ARM template into a build artifact
# Requires a package.json file located in the target repository

trigger:
- main

pool:
  vmImage: 'windows-latest'

variables:
  - group: DataOpsUAT
  
steps:

- powershell: dir $(Build.SourcesDirectory) -recurse

- task: UsePythonVersion@0
  displayName: Configuring Python Version
  inputs:
    versionSpec: '3.x'
    addToPath: true
    architecture: 'x64'


- bash: |
    pip3 install --upgrade databricks-cli
    databricks configure --token --profile AZDO

- powershell: |
    databricks workspace list --profile AZDO
    databricks workspace import_dir -o --profile AZDO $(Build.SourcesDirectory)/databricks/ /demo
